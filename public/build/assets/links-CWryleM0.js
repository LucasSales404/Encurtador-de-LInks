import{s}from"./alert-BE4xWb8l.js";import{s as i}from"./loading-screen-CuIDJiJ1.js";const a=document.querySelector("#loadingScreen"),d=document.querySelectorAll(".button-delete"),e=document.querySelector(".without-link");e.dataset.count>0&&e.classList.add("hidden");d.forEach(o=>{o.addEventListener("click",async()=>{const n=o.dataset.id;if(confirm("Tem certeza que deseja excluir o link?")){i("Excluindo seu link...");try{const t=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),c=await fetch(`links/delete/${n}`,{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":t}}),r=await c.json();if(c.ok)document.querySelector(`#link-${n}`).remove(),e.dataset.count--,e.dataset.count<1&&e.classList.remove("hidden"),s("Link excluído com sucesso!");else throw console.error("Erro do backend:",r),new Error(r.message||"Erro ao excluir link")}catch(t){console.error(t)}finally{a.classList.add("hidden")}}})});
