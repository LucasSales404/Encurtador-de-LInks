import{s as i}from"./alert-BE4xWb8l.js";import{s as u,h as d}from"./loading-screen-CuIDJiJ1.js";import{s as m}from"./showUrl-Che5ZuxD.js";const p=document.querySelector("#inputUrl"),o=document.querySelector("#personalizarLink"),f=document.querySelector("#caminho");o&&o.addEventListener("input",()=>{f.textContent="https://SnapLink/"+o.value});const e=document.querySelector("#buttonCopy"),l=document.querySelector("#formEncurtar");let s="";l&&l.addEventListener("submit",async n=>{n.preventDefault();const a={url:p.value,caminho:o.value};u("Encurtando seu link");try{const r=document.querySelector('meta[name="csrf-token"]').getAttribute("content");console.log("Dados enviados:",a);const c=await fetch("/store/",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":r},body:JSON.stringify(a)}),t=await c.json();if(c.ok)t.success?(console.log("Encurtada"),s=t.short_url,m(s),e.classList.remove("hidden")):t.success||i(t.message);else throw console.log("entrou no erro do response"),new Error(t.message||"Erro ao encurtar link")}catch(r){console.error(r),i("Erro ao encurtar link"),e.classList.add("hidden")}finally{d()}});document.addEventListener("click",n=>{if(n.target.id==="buttonCopy"){if(e.textContent==="Copiado")return;navigator.clipboard.writeText(s),e.textContent="Copiado",e.classList.remove("bg-neutral-700"),e.style.backgroundColor="gray"}});
